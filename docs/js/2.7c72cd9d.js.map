{"version":3,"sources":["webpack:///./src/views/TimerDisplay/TimerDisplay.vue","webpack:///./src/views/TimerDisplay/TimerDisplay.vue?2e08","webpack:///./src/views/TimerDisplay/TimerDisplay.vue?1622"],"names":["TimerDisplay","vue_runtime_esm","extend","name","components","timer-notification","__webpack_require__","e","then","bind","props","timerAmount","type","Number","String","default","data","progressSize","timerValue","percentageForDisplay","fullTimerDisplay","timerEndTime","timerActive","notificationAllowed","timerWorker","Worker","created","document","addEventListener","_this","postMessage","checkTimerValue","this","$root","firebaseMessaging","onMessage","resetTimer","onmessage","event","hidden","$nextTick","_event$data","timeDiff","Date","now","_audio","$refs","audio","play","requestAnimationFrame","matchUpdater","size","mediaQueryList","matches","mediaQueryLists","query","window","matchMedia","map","mqlObj","addListener","fullAmount","setTimeout","circularOverlay","querySelector","style","transition","color","destroyed","terminate","methods","startTimer","_audio2","pause","currentTime","resumeTimer","pauseTimer","allowNotification","notificationValue","render","_vm","_h","$createElement","_c","_self","attrs","id","timer-worker","on","notification-state","ref","src","staticClass","_v","_s","staticStyle","transform","xmlns","height","width","fill","cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset","light","fab","outline","nativeOn","click","$event","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","__webpack_exports__"],"mappings":"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","file":"js/2.7c72cd9d.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nlet audio: HTMLAudioElement;\n\nexport default Vue.extend({\n  name: \"TimerDisplay\",\n  components: {\n    \"timer-notification\": () =>\n      import(\"@/components/TimerNotification/TimerNotification.vue\")\n  },\n  props: {\n    timerAmount: {\n      type: [Number, String],\n      default: 0\n    }\n  },\n  data() {\n    return {\n      progressSize: 100,\n      timerValue: 0,\n      percentageForDisplay: 0,\n      fullTimerDisplay: \"00:00:00\",\n      timerEndTime: 0,\n      timerActive: false,\n      notificationAllowed: false,\n      timerWorker: new Worker(\"./worker/timer.worker.js\")\n    };\n  },\n  created() {\n    document.addEventListener(\"visibilitychange\", () => {\n      this.timerWorker.postMessage({ checkTimerValue: true });\n    });\n\n    // @ts-ignore\n    this.$root.firebaseMessaging.onMessage(() => {\n      this.resetTimer();\n    });\n\n    this.notificationAllowed = false;\n    this.timerWorker.onmessage = event => {\n      if (!document.hidden) {\n        this.$nextTick(() => {\n          const {\n            timerValue,\n            timerEndTime,\n            percentageForDisplay,\n            fullTimerDisplay\n          } = event.data;\n\n          if (timerValue === 0) {\n            const timeDiff = (Date.now() - timerEndTime) / 10;\n            if (this.notificationAllowed && timeDiff < 10) {\n              const audio = this.$refs.audio as HTMLAudioElement;\n              audio.play();\n            }\n\n            this.resetTimer();\n          } else {\n            requestAnimationFrame(() => {\n              this.percentageForDisplay = percentageForDisplay;\n              this.timerValue = timerValue;\n              this.fullTimerDisplay = fullTimerDisplay;\n            });\n          }\n        });\n      }\n    };\n\n    const matchUpdater = (size: number) => (mediaQueryList: MediaQueryList) => {\n      if (mediaQueryList.matches) {\n        this.progressSize = size;\n      }\n    };\n\n    const mediaQueryLists = [\n      { query: window.matchMedia(\"(min-width: 950px)\"), size: \"600\" },\n      { query: window.matchMedia(\"(max-width: 949px)\"), size: \"450\" },\n      { query: window.matchMedia(\"(min-width: 600px)\"), size: \"450\" },\n      { query: window.matchMedia(\"(max-width: 599px)\"), size: \"400\" },\n      { query: window.matchMedia(\"(min-width: 426px)\"), size: \"380\" },\n      { query: window.matchMedia(\"(max-width: 425px)\"), size: \"350\" },\n      { query: window.matchMedia(\"(min-width: 321px)\"), size: \"280\" },\n      { query: window.matchMedia(\"(max-width: 320px)\"), size: \"250\" }\n    ];\n\n    mediaQueryLists.map(mqlObj =>\n      mqlObj.query.addListener(matchUpdater.bind(this)(mqlObj.size))\n    );\n    mediaQueryLists.map(mqlObj =>\n      matchUpdater.bind(this)(mqlObj.size)(mqlObj.query)\n    );\n\n    this.timerWorker.postMessage({\n      resetTimer: true,\n      timerAmount: this.timerAmount,\n      fullAmount: this.timerAmount\n    });\n    this.timerActive = false;\n\n    setTimeout(() => {\n      const circularOverlay: HTMLDivElement = document.querySelector(\n        \".progress-circular__overlay\"\n      ) as HTMLDivElement;\n\n      if (circularOverlay) {\n        circularOverlay.style.transition = \"none\";\n        circularOverlay.style.color = \"#4caf50\";\n      }\n    }, 500);\n  },\n  destroyed() {\n    this.resetTimer();\n    this.timerWorker.terminate();\n  },\n  methods: {\n    startTimer(): void {\n      this.timerActive = true;\n      if (this.timerValue === this.timerAmount) {\n        const audio = this.$refs.audio as HTMLAudioElement;\n\n        audio.pause();\n        audio.currentTime = 0;\n\n        this.timerWorker.postMessage({\n          startTimer: true,\n          timerAmount: this.timerAmount,\n          fullAmount: this.timerAmount,\n          notificationAllowed: this.notificationAllowed\n        });\n      } else {\n        this.resumeTimer();\n      }\n    },\n    resumeTimer(): void {\n      this.timerActive = true;\n\n      this.timerWorker.postMessage({\n        startTimer: true,\n        timerAmount: this.timerValue,\n        fullAmount: this.timerAmount\n      });\n    },\n    pauseTimer(): void {\n      this.timerActive = false;\n\n      this.timerWorker.postMessage({ startTimer: false });\n    },\n    resetTimer(): void {\n      this.timerActive = false;\n\n      this.timerWorker.postMessage({\n        resetTimer: true,\n        timerAmount: this.timerAmount,\n        fullAmount: this.timerAmount\n      });\n    },\n    allowNotification(notificationValue: boolean): void {\n      this.notificationAllowed = notificationValue;\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/views/TimerDisplay/TimerDisplay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"timer\"}},[_c('timer-notification',{attrs:{\"timer-worker\":_vm.timerWorker},on:{\"notification-state\":_vm.allowNotification}}),_c('audio',{ref:\"audio\",attrs:{\"src\":\"audio/foghorn-daniel_simon.mp3\"}}),_c('div',{staticClass:\"timer\"},[_c('div',{staticClass:\"timer-content__values green--text\"},[_vm._v(\"\\n      \"+_vm._s(_vm.fullTimerDisplay)+\"\\n    \")]),_c('div',{staticClass:\"timer-content\"},[_c('svg',{staticStyle:{\"transform\":\"rotate(-90deg)\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"300\",\"width\":\"300\"}},[_c('circle',{staticClass:\"progress-circular__underlay\",attrs:{\"fill\":\"transparent\",\"cx\":\"150\",\"cy\":\"150\",\"r\":\"147.5\",\"stroke-width\":\"5\",\"stroke-dasharray\":\"926.77\",\"stroke-dashoffset\":\"0\"}}),_c('circle',{staticClass:\"progress-circular__overlay\",staticStyle:{\"transition\":\"none\"},attrs:{\"fill\":\"transparent\",\"cx\":\"150\",\"cy\":\"150\",\"r\":\"147.5\",\"stroke-width\":\"5\",\"stroke-dasharray\":\"926.77\",\"stroke-dashoffset\":926.77 - (926.77 * _vm.percentageForDisplay/100)}})])]),_c('div',{staticClass:\"timer-buttons\"},[_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"blue\"},nativeOn:{\"click\":function($event){_vm.resetTimer()}}},[_c('v-icon',[_vm._v(\"loop\")])],1),(_vm.timerActive)?_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"red\"},nativeOn:{\"click\":function($event){_vm.pauseTimer()}}},[_c('v-icon',[_vm._v(\"pause_circle_outline\")])],1):_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.startTimer()}}},[_c('v-icon',[_vm._v(\"play_circle_outline\")])],1)],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2465a1bc\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/TimerDisplay/TimerDisplay.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2465a1bc\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TimerDisplay.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/mumarov/code/code-shop-timer/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TimerDisplay.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/mumarov/code/code-shop-timer/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TimerDisplay.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2465a1bc\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TimerDisplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2465a1bc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/TimerDisplay/TimerDisplay.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}