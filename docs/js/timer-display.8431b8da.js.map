{"version":3,"sources":["webpack:///./src/views/TimerDisplay/TimerDisplay.vue?1c6e","webpack:///./src/views/TimerDisplay/TimerDisplay.vue?4b80","webpack:///./src/views/TimerDisplay/TimerDisplay.vue?145b","webpack:///./src/views/TimerDisplay/TimerDisplay.vue?d305","webpack:///./src/views/TimerDisplay/TimerDisplay.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_eslint_loader_index_js_ref_12_0_TimerDisplay_vue_vue_type_style_index_0_id_2ca355ef_scoped_true_lang_css__WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","attrs","id","timer-worker","timerWorker","on","notification-state","allowNotification","_v","ref","src","staticClass","_s","fullTimerDisplay","staticStyle","transform","xmlns","height","width","fill","cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset","transition","percentageForDisplay","light","fab","outline","color","nativeOn","click","$event","resetTimer","pauseTimer","startTimer","staticRenderFns","TimerDisplayvue_type_script_lang_ts","vue_runtime_esm","extend","name","components","timer-notification","__webpack_require__","e","then","bind","props","timerAmount","type","Number","String","default","data","progressSize","timerValue","timerEndTime","timerActive","notificationAllowed","Worker","created","document","addEventListener","_this","postMessage","checkTimerValue","$root","firebaseMessaging","onMessage","onmessage","event","hidden","_event$data","timeDiff","Date","now","_audio","$refs","audio","play","requestAnimationFrame","setTimeout","matchUpdater","size","mediaQueryList","matches","mediaQueryLists","query","window","matchMedia","map","mqlObj","addListener","fullAmount","circularOverlay","querySelector","style","destroyed","terminate","methods","_audio2","pause","currentTime","resumeTimer","notificationValue","TimerDisplay_TimerDisplayvue_type_script_lang_ts","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/timer-display.8431b8da.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/eslint-loader/index.js??ref--12-0!./TimerDisplay.vue?vue&type=style&index=0&id=2ca355ef&scoped=true&lang=css\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/eslint-loader/index.js??ref--12-0!./TimerDisplay.vue?vue&type=style&index=0&id=2ca355ef&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"timer\"}},[_c('timer-notification',{attrs:{\"timer-worker\":_vm.timerWorker},on:{\"notification-state\":_vm.allowNotification}}),_vm._v(\" \"),_c('audio',{ref:\"audio\",attrs:{\"src\":\"audio/foghorn-daniel_simon.mp3\"}}),_vm._v(\" \"),_c('div',{staticClass:\"timer\"},[_c('div',{staticClass:\"timer-content__values green--text\"},[_vm._v(\"\\n      \"+_vm._s(_vm.fullTimerDisplay)+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"timer-content\"},[_c('svg',{staticStyle:{\"transform\":\"rotate(-90deg)\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"300\",\"width\":\"300\"}},[_c('circle',{staticClass:\"progress-circular__underlay\",attrs:{\"fill\":\"transparent\",\"cx\":\"150\",\"cy\":\"150\",\"r\":\"147.5\",\"stroke-width\":\"5\",\"stroke-dasharray\":\"926.77\",\"stroke-dashoffset\":\"0\"}}),_vm._v(\" \"),_c('circle',{staticClass:\"progress-circular__overlay\",staticStyle:{\"transition\":\"none\"},attrs:{\"fill\":\"transparent\",\"cx\":\"150\",\"cy\":\"150\",\"r\":\"147.5\",\"stroke-width\":\"5\",\"stroke-dasharray\":\"926.77\",\"stroke-dashoffset\":_vm.percentageForDisplay}})])]),_vm._v(\" \"),_c('div',{staticClass:\"timer-buttons\"},[_c('div',[_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"blue\"},nativeOn:{\"click\":function($event){_vm.resetTimer()}}},[_c('v-icon',[_vm._v(\"stop\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"text-xs-center subheading blue--text\"},[_vm._v(\"Stop\")])],1),_vm._v(\" \"),(_vm.timerActive)?_c('div',[_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"orange\"},nativeOn:{\"click\":function($event){_vm.pauseTimer()}}},[_c('v-icon',[_vm._v(\"pause_circle_outline\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"text-xs-center subheading orange--text\"},[_vm._v(\"Pause\")])],1):_c('div',[_c('v-btn',{staticClass:\"btn--light-flat-focused white--text timer-button\",attrs:{\"light\":\"\",\"fab\":\"\",\"outline\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.startTimer()}}},[_c('v-icon',[_vm._v(\"play_circle_outline\")])],1),_vm._v(\" \"),_c('p',{staticClass:\"text-xs-center subheading green--text\"},[_vm._v(\"Start\")])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\nlet audio: HTMLAudioElement;\n\nexport default Vue.extend({\n  name: \"TimerDisplay\",\n  components: {\n    \"timer-notification\": () =>\n      import(\"@/components/TimerNotification/TimerNotification.vue\")\n  },\n  props: {\n    timerAmount: {\n      type: [Number, String],\n      default: 0\n    }\n  },\n  data() {\n    return {\n      progressSize: 100,\n      timerValue: 0,\n      percentageForDisplay: 0,\n      fullTimerDisplay: \"00:00:00:00\",\n      timerEndTime: 0,\n      timerActive: false,\n      notificationAllowed: false,\n      timerWorker: new Worker(\"./worker/timer.worker.js\")\n    };\n  },\n  created() {\n    document.addEventListener(\"visibilitychange\", () => {\n      this.timerWorker.postMessage({ checkTimerValue: true });\n    });\n\n    // @ts-ignore\n    this.$root.firebaseMessaging.onMessage(() => {\n      this.resetTimer();\n    });\n\n    this.notificationAllowed = false;\n    this.timerWorker.onmessage = event => {\n      if (!document.hidden) {\n        const {\n          timerValue,\n          percentageForDisplay,\n          fullTimerDisplay\n        } = event.data;\n\n        if (timerValue === 0) {\n          const { timerEndTime } = event.data;\n          const timeDiff = (Date.now() - timerEndTime) / 10;\n          if (this.notificationAllowed && timeDiff < 10) {\n            const audio = this.$refs.audio as HTMLAudioElement;\n            audio.play();\n          }\n\n          this.resetTimer();\n        } else {\n          requestAnimationFrame(() => {\n            this.percentageForDisplay = percentageForDisplay;\n            this.fullTimerDisplay = fullTimerDisplay;\n          });\n\n          setTimeout(() => {\n            this.timerValue = timerValue;\n          }, 0);\n        }\n      }\n    };\n\n    const matchUpdater = (size: number) => (mediaQueryList: MediaQueryList) => {\n      if (mediaQueryList.matches) {\n        this.progressSize = size;\n      }\n    };\n\n    const mediaQueryLists = [\n      { query: window.matchMedia(\"(min-width: 950px)\"), size: \"600\" },\n      { query: window.matchMedia(\"(max-width: 949px)\"), size: \"450\" },\n      { query: window.matchMedia(\"(min-width: 600px)\"), size: \"450\" },\n      { query: window.matchMedia(\"(max-width: 599px)\"), size: \"400\" },\n      { query: window.matchMedia(\"(min-width: 426px)\"), size: \"380\" },\n      { query: window.matchMedia(\"(max-width: 425px)\"), size: \"350\" },\n      { query: window.matchMedia(\"(min-width: 321px)\"), size: \"280\" },\n      { query: window.matchMedia(\"(max-width: 320px)\"), size: \"250\" }\n    ];\n\n    mediaQueryLists.map(mqlObj =>\n      mqlObj.query.addListener(matchUpdater.bind(this)(mqlObj.size))\n    );\n    mediaQueryLists.map(mqlObj =>\n      matchUpdater.bind(this)(mqlObj.size)(mqlObj.query)\n    );\n\n    this.timerWorker.postMessage({\n      resetTimer: true,\n      timerAmount: this.timerAmount,\n      fullAmount: this.timerAmount\n    });\n    this.timerActive = false;\n\n    setTimeout(() => {\n      const circularOverlay: HTMLDivElement = document.querySelector(\n        \".progress-circular__overlay\"\n      ) as HTMLDivElement;\n\n      if (circularOverlay) {\n        circularOverlay.style.transition = \"none\";\n        circularOverlay.style.color = \"#4caf50\";\n      }\n    }, 500);\n  },\n  destroyed() {\n    this.resetTimer();\n    this.timerWorker.terminate();\n  },\n  methods: {\n    startTimer(): void {\n      this.timerActive = true;\n      if (this.timerValue === this.timerAmount) {\n        const audio = this.$refs.audio as HTMLAudioElement;\n\n        audio.pause();\n        audio.currentTime = 0;\n\n        this.timerWorker.postMessage({\n          startTimer: true,\n          timerAmount: this.timerAmount,\n          fullAmount: this.timerAmount,\n          notificationAllowed: this.notificationAllowed\n        });\n      } else {\n        this.resumeTimer();\n      }\n    },\n    resumeTimer(): void {\n      this.timerActive = true;\n\n      this.timerWorker.postMessage({\n        startTimer: true,\n        timerAmount: this.timerValue,\n        fullAmount: this.timerAmount\n      });\n    },\n    pauseTimer(): void {\n      this.timerActive = false;\n\n      this.timerWorker.postMessage({ startTimer: false });\n    },\n    resetTimer(): void {\n      this.timerActive = false;\n\n      this.timerWorker.postMessage({\n        resetTimer: true,\n        timerAmount: this.timerAmount,\n        fullAmount: this.timerAmount\n      });\n    },\n    allowNotification(notificationValue: boolean): void {\n      this.notificationAllowed = notificationValue;\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/eslint-loader/index.js??ref--12-0!./TimerDisplay.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/eslint-loader/index.js??ref--12-0!./TimerDisplay.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TimerDisplay.vue?vue&type=template&id=2ca355ef&scoped=true\"\nimport script from \"./TimerDisplay.vue?vue&type=script&lang=ts\"\nexport * from \"./TimerDisplay.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TimerDisplay.vue?vue&type=style&index=0&id=2ca355ef&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ca355ef\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}