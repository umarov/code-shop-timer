{"version":3,"sources":["webpack:///static/js/5.eab28d27bd32264ee922.js","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.js","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.vue","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.vue?2a30"],"names":["webpackJsonp","183","module","__webpack_exports__","__webpack_require__","name","props","timerWorker","type","Worker","data","notificationPermission","Notification","permission","notificationAllowed","token","worker","this","mounted","_this","window","swRegistration","setupTokens","document","addEventListener","methods","_this2","firebaseMessaging","getToken","then","onTokenReceived","catch","notificationNotAllowed","fireEventWithNotificationState","onTokenRefresh","currentToken","sendTokenToWorker","getCachedOverride","postMessage","setNotificationToken","notificationToken","$emit","subscribeForNotifications","_this3","requestPermission","setCachedOverride","localStorage","getItem","notificationOverride","setItem","195","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_574e024c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__","normalizeComponent","Component","196","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","row","center","justify-space-around","outline","flat","color","nativeOn","click","$event","_v","_e","staticRenderFns","esExports"],"mappings":"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","file":"static/js/5.eab28d27bd32264ee922.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 183:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'timer-notification',\n  props: {\n    timerWorker: {\n      type: Worker\n    }\n  },\n  data: function data() {\n    return {\n      notificationPermission: Notification.permission,\n      notificationAllowed: null,\n      token: null,\n      worker: this.timerWorker\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    if (window.swRegistration) {\n      this.setupTokens();\n    } else {\n      document.addEventListener('serviceWorkerRegistered', function () {\n        _this.setupTokens();\n      });\n    }\n  },\n\n  methods: {\n    setupTokens: function setupTokens() {\n      var _this2 = this;\n\n      window.firebaseMessaging.getToken().then(this.onTokenReceived).catch(this.notificationNotAllowed).then(this.fireEventWithNotificationState);\n      window.firebaseMessaging.onTokenRefresh(function () {\n        window.firebaseMessaging.getToken().then(_this2.onTokenReceived).catch(_this2.notificationNotAllowed).then(_this2.fireEventWithNotificationState);\n      });\n    },\n    onTokenReceived: function onTokenReceived(currentToken) {\n      if (currentToken) {\n        this.token = currentToken;\n        this.sendTokenToWorker(currentToken);\n        this.notificationAllowed = this.getCachedOverride();\n      } else {\n        this.notificationNotAllowed();\n      }\n    },\n    notificationNotAllowed: function notificationNotAllowed() {\n      this.notificationAllowed = false;\n    },\n    sendTokenToWorker: function sendTokenToWorker(token) {\n      this.worker.postMessage({\n        setNotificationToken: true,\n        notificationToken: token\n      });\n    },\n    fireEventWithNotificationState: function fireEventWithNotificationState() {\n      this.$emit('notification-state', this.getCachedOverride());\n    },\n    subscribeForNotifications: function subscribeForNotifications() {\n      var _this3 = this;\n\n      window.firebaseMessaging.requestPermission().then(function () {\n        _this3.notificationAllowed = !_this3.notificationAllowed;\n        _this3.setCachedOverride(_this3.notificationAllowed);\n      }).catch(function () {\n        _this3.setCachedOverride(false);\n      });\n    },\n    getCachedOverride: function getCachedOverride() {\n      return localStorage.getItem('notification-override') === 'true';\n    },\n    setCachedOverride: function setCachedOverride(notificationOverride) {\n      localStorage.setItem('notification-override', notificationOverride);\n      this.fireEventWithNotificationState();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 195:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__ = __webpack_require__(183);\n/* empty harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_574e024c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__ = __webpack_require__(196);\nvar normalizeComponent = __webpack_require__(82)\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_574e024c_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 196:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.token)?_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\",\"center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',[(_vm.notificationAllowed)?_c('v-btn',{staticClass:\"green--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: On\\n              \"),_c('v-icon',[_vm._v(\"notifications\")])],1):(_vm.notificationPermission === 'default')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Need permission\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):(_vm.notificationPermission === 'denied')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Denied\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):_c('v-btn',{staticClass:\"red--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Off\\n              \"),_c('v-icon',[_vm._v(\"notifications_none\")])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.eab28d27bd32264ee922.js","export default {\n  name: 'timer-notification',\n  props: {\n    timerWorker: {\n      type: Worker,\n    },\n  },\n  data() {\n    return {\n      notificationPermission: Notification.permission,\n      notificationAllowed: null,\n      token: null,\n      worker: this.timerWorker,\n    };\n  },\n  mounted() {\n    if (window.swRegistration) {\n      this.setupTokens();\n    } else {\n      document.addEventListener('serviceWorkerRegistered', () => {\n        this.setupTokens();\n      });\n    }\n  },\n  methods: {\n    setupTokens() {\n      window.firebaseMessaging\n        .getToken()\n        .then(this.onTokenReceived)\n        .catch(this.notificationNotAllowed)\n        .then(this.fireEventWithNotificationState);\n      window.firebaseMessaging.onTokenRefresh(() => {\n        window.firebaseMessaging\n          .getToken()\n          .then(this.onTokenReceived)\n          .catch(this.notificationNotAllowed)\n          .then(this.fireEventWithNotificationState);\n      });\n    },\n    onTokenReceived(currentToken) {\n      if (currentToken) {\n        this.token = currentToken;\n        this.sendTokenToWorker(currentToken);\n        this.notificationAllowed = this.getCachedOverride();\n      } else {\n        this.notificationNotAllowed();\n      }\n    },\n    notificationNotAllowed() {\n      this.notificationAllowed = false;\n    },\n    sendTokenToWorker(token) {\n      this.worker.postMessage({\n        setNotificationToken: true,\n        notificationToken: token,\n      });\n    },\n    fireEventWithNotificationState() {\n      this.$emit('notification-state', this.getCachedOverride());\n    },\n    subscribeForNotifications() {\n      window.firebaseMessaging\n        .requestPermission()\n        .then(() => {\n          this.notificationAllowed = !this.notificationAllowed;\n          this.setCachedOverride(this.notificationAllowed);\n        })\n        .catch(() => {\n          this.setCachedOverride(false);\n        });\n    },\n    getCachedOverride() {\n      return localStorage.getItem('notification-override') === 'true';\n    },\n    setCachedOverride(notificationOverride) {\n      localStorage.setItem('notification-override', notificationOverride);\n      this.fireEventWithNotificationState();\n    },\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/TimerDisplay/TimerNotification/TimerNotification.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!./TimerNotification.js\"\nimport __vue_script__ from \"!!babel-loader!./TimerNotification.js\"/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-574e024c\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TimerNotification.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TimerDisplay/TimerNotification/TimerNotification.vue\n// module id = 195\n// module chunks = 5","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.token)?_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\",\"center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',[(_vm.notificationAllowed)?_c('v-btn',{staticClass:\"green--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: On\\n              \"),_c('v-icon',[_vm._v(\"notifications\")])],1):(_vm.notificationPermission === 'default')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Need permission\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):(_vm.notificationPermission === 'denied')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Denied\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):_c('v-btn',{staticClass:\"red--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Off\\n              \"),_c('v-icon',[_vm._v(\"notifications_none\")])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-574e024c\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TimerDisplay/TimerNotification/TimerNotification.vue\n// module id = 196\n// module chunks = 5"],"sourceRoot":""}