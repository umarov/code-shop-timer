webpackJsonp([5],{194:function(i,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=n(195),o=n(196),c=n(80),s=c(e.a,o.a,!1,null,null,null);t.default=s.exports},195:function(i,t,n){"use strict";t.a={name:"timer-notification",props:{timerWorker:{type:Worker}},data:function(){return{notificationPermission:Notification.permission,notificationAllowed:null,worker:this.timerWorker}},mounted:function(){var i=this;window.firebaseMessaging.useServiceWorker(window.swRegistration),window.firebaseMessaging.getToken().then(function(t){t?(i.sendTokenToWorker(t),i.notificationAllowed=i.getCachedOverride()):i.notificationAllowed=!1}).catch(function(){i.notificationAllowed=!1}).then(function(){i.$emit("notification-state",i.notificationAllowed)}),window.firebaseMessaging.onTokenRefresh(function(){window.firebaseMessaging.getToken().then(function(t){t?(i.sendTokenToWorker(t),i.notificationAllowed=i.getCachedOverride()):i.notificationAllowed=!1}).catch(function(){i.notificationAllowed=!1}).then(function(){i.$emit("notification-state",i.notificationAllowed)})})},methods:{sendTokenToWorker:function(i){this.worker.postMessage({setNotificationToken:!0,notificationToken:i})},subscribeForNotifications:function(){var i=this;window.firebaseMessaging.requestPermission().then(function(){i.notificationAllowed=!i.notificationAllowed,i.setCachedOverride(i.notificationAllowed)}).catch(function(){i.setCachedOverride(!1)})},getCachedOverride:function(){return"true"===localStorage.getItem("notification-override")},setCachedOverride:function(i){localStorage.setItem("notification-override",i),this.$emit("notification-state",i)}}}},196:function(i,t,n){"use strict";var e=function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",[n("v-layout",{staticClass:"text-xs-center",attrs:{row:"",center:"","justify-space-around":""}},[n("v-flex",[i.notificationAllowed?n("v-btn",{staticClass:"green--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(t){i.subscribeForNotifications()}}},[i._v("\n              Nofitications: On\n              "),n("v-icon",[i._v("notifications")])],1):"default"===i.notificationPermission?n("v-btn",{staticClass:"grey--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(t){i.subscribeForNotifications()}}},[i._v("\n              Nofitications: Need permission\n              "),n("v-icon",[i._v("notifications_off")])],1):"denied"===i.notificationPermission?n("v-btn",{staticClass:"grey--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(t){i.subscribeForNotifications()}}},[i._v("\n              Nofitications: Denied\n              "),n("v-icon",[i._v("notifications_off")])],1):n("v-btn",{staticClass:"red--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(t){i.subscribeForNotifications()}}},[i._v("\n              Nofitications: Off\n              "),n("v-icon",[i._v("notifications_none")])],1)],1)],1)],1)},o=[],c={render:e,staticRenderFns:o};t.a=c}});
//# sourceMappingURL=5.7a5380eb3c28f06db488.js.map