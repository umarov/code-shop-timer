{"version":3,"sources":["webpack:///static/js/5.b2a67e5271793cfa9ba4.js","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.vue","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.js","webpack:///./src/components/TimerDisplay/TimerNotification/TimerNotification.vue?9014"],"names":["webpackJsonp","194","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d0526b24_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__","normalizeComponent","Component","195","name","props","timerWorker","type","Worker","data","notificationPermission","Notification","permission","notificationAllowed","worker","this","mounted","_this","setTimeout","window","firebaseMessaging","getToken","then","onTokenReceived","catch","notificationNotAllowed","fireEventWithNotificationState","onTokenRefresh","methods","currentToken","sendTokenToWorker","getCachedOverride","token","postMessage","setNotificationToken","notificationToken","$emit","subscribeForNotifications","_this2","requestPermission","setCachedOverride","localStorage","getItem","notificationOverride","setItem","196","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","row","center","justify-space-around","outline","flat","color","nativeOn","click","$event","_v","staticRenderFns","esExports"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAmEJ,EAAoB,KCPhHK,EAAAL,EAAA,KAAAM,EAAAN,EAAA,IAYAO,EAAAD,EACAF,EAAA,EACAC,EAAA,GATA,EAEA,KAEA,KAEA,KAUAN,GAAA,QAAAQ,EAAA,SDcMC,IACA,SAAUV,EAAQC,EAAqBC,GAE7C,YEtCAD,GAAA,GACEU,KAAM,qBACNC,OACEC,aACEC,KAAMC,SAGVC,KAPa,WAQX,OACEC,uBAAwBC,aAAaC,WACrCC,oBAAqB,KACrBC,OAAQC,KAAKT,cAGjBU,QAda,WAcH,GAAAC,GAAAF,IACRG,YAAW,WACTC,OACGC,kBACAC,WACAC,KAAKL,EAAKM,iBACVC,MAAMP,EAAKQ,wBACXH,KAAKL,EAAKS,gCACbP,OACGC,kBACAO,eAAe,WACdR,OACGC,kBACAC,WACAC,KAAKL,EAAKM,iBACVC,MAAMP,EAAKQ,wBACXH,KAAKL,EAAKS,mCAEhB,MAELE,SACEL,gBADO,SACSM,GACVA,GACFd,KAAKe,kBAAkBD,GACvBd,KAAKF,oBAAsBE,KAAKgB,qBAEhChB,KAAKU,0BAGTA,uBATO,WAULV,KAAKF,qBAAsB,GAE7BiB,kBAZO,SAYWE,GAChBjB,KAAKD,OAAOmB,aAAcC,sBAAsB,EAAMC,kBAAmBH,KAE3EN,+BAfO,WAgBLX,KAAKqB,MAAM,qBAAsBrB,KAAKgB,sBAExCM,0BAlBO,WAkBqB,GAAAC,GAAAvB,IAC1BI,QACGC,kBACAmB,oBACAjB,KAAK,WACJgB,EAAKzB,qBAAuByB,EAAKzB,oBACjCyB,EAAKE,kBAAkBF,EAAKzB,uBAE7BW,MAAM,WACLc,EAAKE,mBAAkB,MAG7BT,kBA9BO,WA+BL,MAAyD,SAAlDU,aAAaC,QAAQ,0BAE9BF,kBAjCO,SAiCWG,GAChBF,aAAaG,QAAQ,wBAAyBD,GAC9C5B,KAAKW,qCFmCLmB,IACA,SAAUpD,EAAQC,EAAqBC,GAE7C,YG3GA,IAAAmD,GAAA,WAA0B,GAAAC,GAAAhC,KAAaiC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAAA,EAAA,YAAgCE,YAAA,iBAAAC,OAAoCC,IAAA,GAAAC,OAAA,GAAAC,uBAAA,MAAgDN,EAAA,UAAAH,EAAA,oBAAAG,EAAA,SAAqDE,YAAA,cAAAC,OAAiCI,QAAA,GAAAC,KAAA,GAAAC,MAAA,SAAuCC,UAAWC,MAAA,SAAAC,GAAyBf,EAAAV,gCAAkCU,EAAAgB,GAAA,qDAAAb,EAAA,UAAAH,EAAAgB,GAAA,mCAAAhB,EAAArC,uBAAAwC,EAAA,SAAgKE,YAAA,aAAAC,OAAgCI,QAAA,GAAAC,KAAA,GAAAC,MAAA,SAAuCC,UAAWC,MAAA,SAAAC,GAAyBf,EAAAV,gCAAkCU,EAAAgB,GAAA,kEAAAb,EAAA,UAAAH,EAAAgB,GAAA,sCAAAhB,EAAArC,uBAAAwC,EAAA,SAAgLE,YAAA,aAAAC,OAAgCI,QAAA,GAAAC,KAAA,GAAAC,MAAA,SAAuCC,UAAWC,MAAA,SAAAC,GAAyBf,EAAAV,gCAAkCU,EAAAgB,GAAA,yDAAAb,EAAA,UAAAH,EAAAgB,GAAA,2BAAAb,EAAA,SAA6HE,YAAA,YAAAC,OAA+BI,QAAA,GAAAC,KAAA,GAAAC,MAAA,SAAuCC,UAAWC,MAAA,SAAAC,GAAyBf,EAAAV,gCAAkCU,EAAAgB,GAAA,sDAAAb,EAAA,UAAAH,EAAAgB,GAAA,yCACnwCC,KACAC,GAAiBnB,SAAAkB,kBACjBtE,GAAA","file":"static/js/5.b2a67e5271793cfa9ba4.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 194:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__ = __webpack_require__(195);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d0526b24_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__ = __webpack_require__(196);\nvar normalizeComponent = __webpack_require__(80)\n/* script */\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_TimerNotification_js__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d0526b24_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TimerNotification_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 195:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'timer-notification',\n  props: {\n    timerWorker: {\n      type: Worker\n    }\n  },\n  data: function data() {\n    return {\n      notificationPermission: Notification.permission,\n      notificationAllowed: null,\n      worker: this.timerWorker\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    setTimeout(function () {\n      window.firebaseMessaging.getToken().then(_this.onTokenReceived).catch(_this.notificationNotAllowed).then(_this.fireEventWithNotificationState);\n      window.firebaseMessaging.onTokenRefresh(function () {\n        window.firebaseMessaging.getToken().then(_this.onTokenReceived).catch(_this.notificationNotAllowed).then(_this.fireEventWithNotificationState);\n      });\n    }, 100);\n  },\n\n  methods: {\n    onTokenReceived: function onTokenReceived(currentToken) {\n      if (currentToken) {\n        this.sendTokenToWorker(currentToken);\n        this.notificationAllowed = this.getCachedOverride();\n      } else {\n        this.notificationNotAllowed();\n      }\n    },\n    notificationNotAllowed: function notificationNotAllowed() {\n      this.notificationAllowed = false;\n    },\n    sendTokenToWorker: function sendTokenToWorker(token) {\n      this.worker.postMessage({ setNotificationToken: true, notificationToken: token });\n    },\n    fireEventWithNotificationState: function fireEventWithNotificationState() {\n      this.$emit('notification-state', this.getCachedOverride());\n    },\n    subscribeForNotifications: function subscribeForNotifications() {\n      var _this2 = this;\n\n      window.firebaseMessaging.requestPermission().then(function () {\n        _this2.notificationAllowed = !_this2.notificationAllowed;\n        _this2.setCachedOverride(_this2.notificationAllowed);\n      }).catch(function () {\n        _this2.setCachedOverride(false);\n      });\n    },\n    getCachedOverride: function getCachedOverride() {\n      return localStorage.getItem('notification-override') === 'true';\n    },\n    setCachedOverride: function setCachedOverride(notificationOverride) {\n      localStorage.setItem('notification-override', notificationOverride);\n      this.fireEventWithNotificationState();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 196:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\",\"center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',[(_vm.notificationAllowed)?_c('v-btn',{staticClass:\"green--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: On\\n              \"),_c('v-icon',[_vm._v(\"notifications\")])],1):(_vm.notificationPermission === 'default')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Need permission\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):(_vm.notificationPermission === 'denied')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Denied\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):_c('v-btn',{staticClass:\"red--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Off\\n              \"),_c('v-icon',[_vm._v(\"notifications_none\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.b2a67e5271793cfa9ba4.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!./TimerNotification.js\"/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d0526b24\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TimerNotification.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TimerDisplay/TimerNotification/TimerNotification.vue\n// module id = 194\n// module chunks = 5","export default {\n  name: 'timer-notification',\n  props: {\n    timerWorker: {\n      type: Worker,\n    },\n  },\n  data() {\n    return {\n      notificationPermission: Notification.permission,\n      notificationAllowed: null,\n      worker: this.timerWorker,\n    };\n  },\n  mounted() {\n    setTimeout(() => {\n      window\n        .firebaseMessaging\n        .getToken()\n        .then(this.onTokenReceived)\n        .catch(this.notificationNotAllowed)\n        .then(this.fireEventWithNotificationState);\n      window\n        .firebaseMessaging\n        .onTokenRefresh(() => {\n          window\n            .firebaseMessaging\n            .getToken()\n            .then(this.onTokenReceived)\n            .catch(this.notificationNotAllowed)\n            .then(this.fireEventWithNotificationState);\n        });\n    }, 100);\n  },\n  methods: {\n    onTokenReceived(currentToken) {\n      if (currentToken) {\n        this.sendTokenToWorker(currentToken);\n        this.notificationAllowed = this.getCachedOverride();\n      } else {\n        this.notificationNotAllowed();\n      }\n    },\n    notificationNotAllowed() {\n      this.notificationAllowed = false;\n    },\n    sendTokenToWorker(token) {\n      this.worker.postMessage({ setNotificationToken: true, notificationToken: token });\n    },\n    fireEventWithNotificationState() {\n      this.$emit('notification-state', this.getCachedOverride());\n    },\n    subscribeForNotifications() {\n      window\n        .firebaseMessaging\n        .requestPermission()\n        .then(() => {\n          this.notificationAllowed = !this.notificationAllowed;\n          this.setCachedOverride(this.notificationAllowed);\n        })\n        .catch(() => {\n          this.setCachedOverride(false);\n        });\n    },\n    getCachedOverride() {\n      return localStorage.getItem('notification-override') === 'true';\n    },\n    setCachedOverride(notificationOverride) {\n      localStorage.setItem('notification-override', notificationOverride);\n      this.fireEventWithNotificationState();\n    },\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/TimerDisplay/TimerNotification/TimerNotification.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"row\":\"\",\"center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',[(_vm.notificationAllowed)?_c('v-btn',{staticClass:\"green--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: On\\n              \"),_c('v-icon',[_vm._v(\"notifications\")])],1):(_vm.notificationPermission === 'default')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Need permission\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):(_vm.notificationPermission === 'denied')?_c('v-btn',{staticClass:\"grey--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Denied\\n              \"),_c('v-icon',[_vm._v(\"notifications_off\")])],1):_c('v-btn',{staticClass:\"red--text\",attrs:{\"outline\":\"\",\"flat\":\"\",\"color\":\"green\"},nativeOn:{\"click\":function($event){_vm.subscribeForNotifications()}}},[_vm._v(\"\\n              Nofitications: Off\\n              \"),_c('v-icon',[_vm._v(\"notifications_none\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d0526b24\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TimerDisplay/TimerNotification/TimerNotification.vue\n// module id = 196\n// module chunks = 5"],"sourceRoot":""}