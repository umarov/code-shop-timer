webpackJsonp([5],{183:function(t,i,e){"use strict";i.a={name:"timer-notification",props:{timerWorker:{type:Worker}},data:function(){return{notificationPermission:Notification.permission,notificationAllowed:null,token:null,worker:this.timerWorker}},mounted:function(){var t=this;window.swRegistration?this.setupTokens():document.addEventListener("serviceWorkerRegistered",function(){t.setupTokens()})},methods:{setupTokens:function(){var t=this;window.firebaseMessaging.getToken().then(this.onTokenReceived).catch(this.notificationNotAllowed).then(this.fireEventWithNotificationState),window.firebaseMessaging.onTokenRefresh(function(){window.firebaseMessaging.getToken().then(t.onTokenReceived).catch(t.notificationNotAllowed).then(t.fireEventWithNotificationState)})},onTokenReceived:function(t){t?(this.token=t,this.sendTokenToWorker(t),this.notificationAllowed=this.getCachedOverride()):this.notificationNotAllowed()},notificationNotAllowed:function(){this.notificationAllowed=!1},sendTokenToWorker:function(t){this.worker.postMessage({setNotificationToken:!0,notificationToken:t})},fireEventWithNotificationState:function(){this.$emit("notification-state",this.getCachedOverride())},subscribeForNotifications:function(){var t=this;window.firebaseMessaging.requestPermission().then(function(){t.notificationAllowed=!t.notificationAllowed,t.setCachedOverride(t.notificationAllowed)}).catch(function(){t.setCachedOverride(!1)})},getCachedOverride:function(){return"true"===localStorage.getItem("notification-override")},setCachedOverride:function(t){localStorage.setItem("notification-override",t),this.fireEventWithNotificationState()}}}},195:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(183),o=e(196),s=e(82),c=Object(s.a)(n.a,o.a,o.b,!1,null,null,null);i.default=c.exports},196:function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o});var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.token?e("v-layout",{staticClass:"text-xs-center",attrs:{row:"",center:"","justify-space-around":""}},[e("v-flex",[t.notificationAllowed?e("v-btn",{staticClass:"green--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(i){t.subscribeForNotifications()}}},[t._v("\n              Nofitications: On\n              "),e("v-icon",[t._v("notifications")])],1):"default"===t.notificationPermission?e("v-btn",{staticClass:"grey--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(i){t.subscribeForNotifications()}}},[t._v("\n              Nofitications: Need permission\n              "),e("v-icon",[t._v("notifications_off")])],1):"denied"===t.notificationPermission?e("v-btn",{staticClass:"grey--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(i){t.subscribeForNotifications()}}},[t._v("\n              Nofitications: Denied\n              "),e("v-icon",[t._v("notifications_off")])],1):e("v-btn",{staticClass:"red--text",attrs:{outline:"",flat:"",color:"green"},nativeOn:{click:function(i){t.subscribeForNotifications()}}},[t._v("\n              Nofitications: Off\n              "),e("v-icon",[t._v("notifications_none")])],1)],1)],1):t._e()],1)},o=[]}});
//# sourceMappingURL=5.7ed277eaf92a299854ab.js.map